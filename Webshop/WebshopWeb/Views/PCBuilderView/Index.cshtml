<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="~/css/pcbuilder.css" />

</head>
<div id="overlay" style="display:none;">
    <div class="spinner-border" role="status" id="globalSpinner"></div>
</div>
<div class="row justify-content-center">
    <div class="col-auto">
        <h1>Számítógép összerakó</h1>
    </div>
</div>

<form id="pcBuilderForm">
    <div class="row justify-content-center">
        <div class="col-auto">
            <label for="cpuSelect">Processzor:</label>
            <select id="cpuSelect">
                <option value="">Válassz</option>
            </select>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <label for="motherboardSelect">Alaplap:</label>
            <select id="motherboardSelect">
                <option value="">Válassz</option>
            </select>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <label for="ramSelect">Memória:</label>
            <select id="ramSelect">
                <option value="">Válassz</option>
            </select>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <label for="caseSelect">Gépház:</label>
            <select id="caseSelect">
                <option value="">Válassz</option>
            </select>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <label for="gpuSelect">Videókártya:</label>
            <select id="gpuSelect">
                <option value="">Válassz</option>
            </select>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-auto">
            <label for="psuSelect">Tápegység:</label>
            <select id="psuSelect">
                <option value="">Válassz</option>
            </select>
        </div>
    </div>
    </div>
</form>
<div id="totalCost">Total Cost: <span id="costValue">0</span> Ft</div>

<a href="#" id="addToCart" class="add-to-cart">Kosárba teszem</a>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const addToCartLink = document.querySelector("a#addToCart");

        // Event listener for when selections change
        const form = document.getElementById('pcBuilderForm');
        form.addEventListener('change', function () {
            const cpuId = document.getElementById('cpuSelect').value;
            const motherboardId = document.getElementById('motherboardSelect').value;
            const ramId = document.getElementById('ramSelect').value;
            const caseId = document.getElementById('caseSelect').value;
            const gpuId = document.getElementById('gpuSelect').value;
            const psuId = document.getElementById('psuSelect').value;

            // Create a query string with selected components
            const selectedIds = [cpuId, motherboardId, ramId, caseId, gpuId, psuId]
                .filter(id => id !== "") // Exclude empty selections
                .join(",");

            // Update the href of the 'Kosárba teszem' link dynamically
            if (selectedIds) {
                const url = '@Url.Action("AddToCart", "Product")' + `?ids=${selectedIds}`;
                addToCartLink.setAttribute('href', url);
            } else {
                addToCartLink.setAttribute('href', '#'); // Disable the link if no selection
            }
        });
    });
</script>
<script src="~/js/pcbuilder.js"></script>
